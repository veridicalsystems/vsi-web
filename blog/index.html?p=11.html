<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head profile="http://gmpg.org/xfn/11">
	<title>Speeds and Feeds &rsaquo; NSS Trickery</title>
	<meta http-equiv="content-type" content="text/html; charset=UTF-8" />
	<link rel="stylesheet" type="text/css" media="screen,projection" href="wp-content/themes/veryplaintxt/style.css" title="veryplaintxt" />
	<link rel="stylesheet" type="text/css" media="print" href="wp-content/themes/veryplaintxt/print.css" />
	<link rel="alternate" type="application/rss+xml" href="feed/index.html" title="Speeds and Feeds RSS feed" />
	<link rel="alternate" type="application/rss+xml" href="http://veridicalsystems.com/blog/comments/feed/" title="Speeds and Feeds comments RSS feed" />
	<link rel="pingback" href="xmlrpc.php" />

<link rel="EditURI" type="application/rsd+xml" title="RSD" href="xmlrpc.php%3Frsd" />
<link rel="wlwmanifest" type="application/wlwmanifest+xml" href="wp-includes/wlwmanifest.xml" /> 
<link rel='prev' title='The Fickleness of FIPS' href='index.html%3Fp=9.html' />
<link rel='next' title='DoD PKI and the Beat of a Different Drummer, Part 1' href='index.html%3Fp=13.html' />
<meta name="generator" content="WordPress 3.8.5" />
<link rel='canonical' href='index.html%3Fp=11.html' />
<link rel='shortlink' href='index.html%3Fp=11.html' />

<style type="text/css" media="all">
/*<![CDATA[*/
/* CSS inserted by theme options */
body{font-family:'times new roman',times,serif;font-size:90%;}
body div#container { float: left; margin: 0 -200px 2em 0; } body div#content { margin: 3em 200px 0 0; } body div.sidebar { float: right; }
body div#content div.hentry{text-align:left;}
body div#content h2,div#content h3,div#content h4,div#content h5,div#content h6{font-family:arial,helvetica,sans-serif;}
body div#wrapper{max-width:75em;min-width:35em;width:90%;}
body div.sidebar{text-align:center;}
/*]]>*/
</style>
	<style type="text/css">.recentcomments a{display:inline !important;padding:0 !important;margin:0 !important;}</style>

</head>

<body class="wordpress y2017 m01 d20 h12 single s-y2009 s-m06 s-d15 s-h09 s-category-cryptography s-author-stevem">

<div id="wrapper">

	<div id="header">
		<h1 id="blog-title"><a href="../blog.html" title="Speeds and Feeds">Speeds and Feeds</a></h1>
		<div id="blog-description">Personal Musings of Steve Marquess</div>
	</div><!-- #header -->
	
	<div class="access"><span class="content-access"><a href="index.html%3Fp=11.html#content" title="Skip to content">Skip to content</a></span></div>

<div id="globalnav"><ul id="menu"><li class="page_item_home home-link"><a href="../blog.html" title="Speeds and Feeds" rel="home">Home</a></li><li class="page_item page-item-18"><a href="index.html%3Fp=18.html">About</a></li><li class="page_item page-item-20"><a href="index.html%3Fp=20.html">Contact</a></li></ul></div>

	<div id="container">
		<div id="content" class="hfeed">


			<div id="post-11" class="hentry p1 post publish author-stevem category-cryptography y2009 m06 d15 h09">
				<h2 class="entry-title">NSS Trickery</h2>
				<div class="entry-content">
<p>Like other comparable products Firefox and Thunderbird ship with a wide assortment of pre-installed CA certificates. Not only the usual ones from Verisign, Equifax, and the like but also ones from some obscure entities like “Staat der Nederlanden”, “”Camerfirma Chambers of Commerce”, “TURKTRUST Certificate Services”.</p>
<p>The DoD PKI policy mandates that CA trusted keystores should only contain the CA certs specifically authorized by DISA. This make sense if you think about it, as a desktop system in the Pentagon shouldn’t be trusting CA certs from foreign CAs.</p>
<p>Fixing the keystore should be easy, we just use the handy-dandy GUI based certificate management tool to remove the unauthorized certs, right? No so. If you try that you find that after tediously clicky-clicking your way through and deleting 100 plus certificates that they initially appear to be gone. But, as soon as you restart Firefox (or Thunderbird, etc.) they all reappear. What is happening is that the NSS shared library libnssckbi.so automatically re-adds the bundled CA certs to the disk resident keystore (the cert8.db file).</p>
<p>Now this is downright annoying. Presumably the Mozilla Foundation is being paid for the inclusion of the bundled CA certs and wants to discourage their removal in order to boost the commercial value of that placement, but as with the DoD policy there are legitimate reasons why end users may want to remove bundled certificates.</p>
<p>There appears to be no alternative to complete replacement of the libnssckbi.so library. The bundled certs are defined in the file mozilla/security/nss/lib/ckfw/builtins/certdata.txt in the source tree. The Mozilla specific build process is annoyingly awkward and different for both Linux/Unix and Windows.</p>
<p>It should be noted that we have essentially the same problem in a different form with Microsoft Windows, as routine Microsoft issued patches tend to reinsert CA certificates. As we don’t have the option of modifying the software culling the unwanted CA certs requires constant vigilance.</p>

				</div>

				<div class="entry-meta">
					This was written by <span class="vcard"><span class="fn n">stevem</span></span>. Posted on <abbr class="published" title="2009-06-15T14:42:00+0000">Monday, June 15, 2009, at 14:42</abbr>. Filed under <a href="category/cryptography/index.html" title="View all posts in Cryptography" rel="category tag">Cryptography</a>. Bookmark the <a href="index.html%3Fp=11.html" title="Permalink to NSS Trickery" rel="bookmark">permalink</a>. Follow comments here with the <a href="nss-trickery/feed/index.html" title="Comments RSS to NSS Trickery" rel="alternate" type="application/rss+xml">RSS feed</a>.					Both comments and trackbacks are currently closed.
				</div>
			</div><!-- .post -->

<div class="comments">


</div>
			<div id="nav-below" class="navigation">
				<div class="nav-previous">&lsaquo; <a href="index.html%3Fp=9.html" rel="prev">The Fickleness of FIPS</a></div>
				<div class="nav-next"><a href="index.html%3Fp=13.html" rel="next">DoD PKI and the Beat of a Different Drummer, Part 1</a> &rsaquo;</div>
			</div>

		</div><!-- #content .hfeed -->
	</div><!-- #container -->

		<div id="primary" class="sidebar">
			<ul>
<li id="search-2" class="widget widget_search"><form role="search" method="get" id="searchform" class="searchform" action="../blog.html">
				<div>
					<label class="screen-reader-text" for="s">Search for:</label>
					<input type="text" value="" name="s" id="s" />
					<input type="submit" id="searchsubmit" value="Search" />
				</div>
			</form></li>
		<li id="recent-posts-2" class="widget widget_recent_entries">		<h3 class='widgettitle'>Recent Posts</h3>
		<ul>
					<li>
				<a href="index.html%3Fp=141.html">Life in a Digital Ghetto</a>
						</li>
					<li>
				<a href="index.html%3Fp=80.html">Of Money, Responsibility, and Pride</a>
						</li>
					<li>
				<a href="secure-or-compliant-pick-one/immutability-of-fips/index.html">The Immutability of FIPS</a>
						</li>
					<li>
				<a href="index.html%3Fp=44.html">Photovoltaic System</a>
						</li>
					<li>
				<a href="index.html%3Fp=4.html">Pain</a>
						</li>
				</ul>
		</li>
<li id="recent-comments-2" class="widget widget_recent_comments"><h3 class='widgettitle'>Recent Comments</h3>
<ul id="recentcomments"></ul></li>
<li id="archives-2" class="widget widget_archive"><h3 class='widgettitle'>Archives</h3>
		<ul>
			<li><a href='2015/03/index.html'>March 2015</a></li>
	<li><a href='2014/04/index.html'>April 2014</a></li>
	<li><a href='2014/03/index.html'>March 2014</a></li>
	<li><a href='2013/05/index.html'>May 2013</a></li>
	<li><a href='2011/08/index.html'>August 2011</a></li>
	<li><a href='2009/07/index.html'>July 2009</a></li>
	<li><a href='2009/06/index.html'>June 2009</a></li>
	<li><a href='2009/04/index.html'>April 2009</a></li>
		</ul>
</li>
<li id="categories-2" class="widget widget_categories"><h3 class='widgettitle'>Categories</h3>
		<ul>
	<li class="cat-item cat-item-3"><a href="category/cryptography/index.html" title="Cryptography in general and OpenSSL in particular">Cryptography</a>
</li>
	<li class="cat-item cat-item-4"><a href="category/distractions/index.html" title="Various personal interests">Distractions</a>
<ul class='children'>
	<li class="cat-item cat-item-5"><a href="category/distractions/construction/index.html" title="Additions to the homestead">Construction</a>
</li>
	<li class="cat-item cat-item-6"><a href="category/distractions/metal-illness/index.html" title="Happenings in the machine shop">Metal Illness</a>
</li>
</ul>
</li>
	<li class="cat-item cat-item-7"><a href="category/information-assurance/index.html" title="The strange and bizarre world of information assurance">Information Assurance</a>
</li>
	<li class="cat-item cat-item-8"><a href="category/miscellaneous/index.html" title="Odds and ends">Miscellaneous</a>
</li>
	<li class="cat-item cat-item-1"><a href="category/uncategorized/index.html" title="View all posts filed under Uncategorized">Uncategorized</a>
</li>
		</ul>
</li>
<li id="meta-2" class="widget widget_meta"><h3 class='widgettitle'>Meta</h3>
			<ul>
						<li><a href="wp-login.php.html">Log in</a></li>
			<li><a href="feed/index.html" title="Syndicate this site using RSS 2.0">Entries <abbr title="Really Simple Syndication">RSS</abbr></a></li>
			<li><a href="http://veridicalsystems.com/blog/comments/feed/" title="The latest comments to all posts in RSS">Comments <abbr title="Really Simple Syndication">RSS</abbr></a></li>
			<li><a href="http://wordpress.org/" title="Powered by WordPress, state-of-the-art semantic personal publishing platform.">WordPress.org</a></li>						</ul>
</li>

			</ul>
		</div><!-- #primary .sidebar -->	<div id="footer">
		<span id="copyright">&copy; 2017 <span class="vcard"><a class="url fn n" href="index.html%3Fp=11.html"><span class="given-name"></span> <span class="family-name"></span></a></span></span>
		<span class="meta-sep">&para;</span>
		<span id="generator-link">Powered by <a href="http://wordpress.org/" title="WordPress">WordPress</a>.</span>
		<span class="meta-sep">&para;</span>
		<span id="theme-link"><a href="http://www.plaintxt.org/themes/veryplaintxt/" title="veryplaintxt theme for WordPress" rel="follow designer">veryplaintxt</a> theme by <span class="vcard"><a class="url fn n" href="http://scottwallick.com/" title="scottwallick.com" rel="follow designer"><span class="given-name">Scott</span><span class="additional-name"> Allan</span><span class="family-name"> Wallick</span></a></span>.</span>
	</div><!-- #footer -->
<P STYLE="font-size: small; font-style: italic; text-align: center">
Opinions expressed herein are not necessarily those of Veridical Systems, OpenSSL, DoD, the author's evil twin Skippy, or anyone else possibly including the author himself. 
</P>


</div><!-- #wrapper -->

</body><!-- end transmission -->
</html>
